<!DOCTYPE html>
<html>
<head>
  <title>Свободни спешни легла</title>
  <style>
    /* CSS styling for the user interface */
    /* ... CSS styles ... */
  </style>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script>
	const firebaseConfig = {
  apiKey: "AIzaSyDFXUT28pG0KiXcHrXHpnFTNfikeml1oZ8",
  authDomain: "sys112.firebaseapp.com",
  databaseURL: "https://sys112-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "sys112",
  storageBucket: "sys112.appspot.com",
  messagingSenderId: "386925628090",
  appId: "1:386925628090:web:cbbd384b46d55ad6b95083",
};

    // Initialize Firebase
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    // Function to update hospital data based on Firebase values
    function updateHospitalData() {
      var table = document.getElementById('hospital-table');
      var dbRef = firebase.database().ref('hospitals');

      dbRef.on('value', function(snapshot) {
        var hospitals = snapshot.val();
        table.innerHTML = `
          <tr>
            <th>Болница</th>
            <th>Свободни легла</th>
          </tr>
        `;
        for (var key in hospitals) {
          if (hospitals.hasOwnProperty(key)) {
            var hospital = hospitals[key];
            var row = document.createElement('tr');
            row.innerHTML = `
              <td>${hospital.name}</td>
              <td>${hospital.beds}</td>
            `;
            applyColorCoding(row);
            table.appendChild(row);
          }
        }
      });
    }

    // JavaScript function to apply color coding based on available beds
    function applyColorCoding(row) {
      var freeBeds = parseInt(row.cells[1].innerText);
      if (freeBeds <= 0) {
        row.classList.add('available-beds-red');
      } else if (freeBeds <= 5) {
        row.classList.add('available-beds-yellow');
      } else {
        row.classList.add('available-beds-green');
      }
    }

    // Call the updateHospitalData function on page load
    window.addEventListener('load', updateHospitalData);
  </script>
</head>
<body>
  <h1>Свободни спешни легла</h1>
  <table id="hospital-table"></table>
</body>
</html>
